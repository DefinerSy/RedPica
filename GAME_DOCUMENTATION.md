# 无人红色皮卡的安保之旅 — 游戏文档

> 一辆由汉字「皮卡」构成的红色皮卡，在无尽的公路上行驶。管理资源，搭载乘客，应对事件，驶向更远的远方。

**游戏地址**: [https://definetsy.github.io/RedPica/game.html](https://definetsy.github.io/RedPica/game.html)

---

## 📖 目录

1. [游戏概述](#游戏概述)
2. [快速开始](#快速开始)
3. [核心玩法](#核心玩法)
4. [数值系统](#数值系统)
5. [乘客系统](#乘客系统)
6. [物品系统](#物品系统)
7. [事件系统](#事件系统)
8. [结局与成就](#结局与成就)
9. [开发指南](#开发指南)

---

## 游戏概述

### 基本信息

| 项目 | 说明 |
|------|------|
| **游戏名称** | 无人红色皮卡的安保之旅 |
| **游戏类型** | 文字冒险 + 策略生存 + 资源管理 |
| **视觉风格** | 汉字 ASCII 艺术风格 |
| **技术栈** | 原生 JavaScript + Tailwind CSS |

### 核心玩法

玩家驾驶一辆红色皮卡在公路上行驶，通过自动生成的文本推进旅程。每 2 行文本可能触发随机事件，玩家需在事件中做出选择，管理**燃油**、**耐久**、**舒适度**三个核心数值，搭载各类乘客，收集物品，应对各种突发状况，尽可能行驶更远，达成多种结局与成就。

---

## 快速开始

### 游戏入口

- **主菜单**: [`index.html`](index.html) — 开始游戏、重置、查看成就与历史
- **主游戏**: [`game.html`](game.html) — 实际游戏页面

### 操作说明

| 操作 | 说明 |
|------|------|
| 点击 START | 开始新游戏 |
| 点击选项按钮 | 在事件中选择行动 |
| 拖拽物品 | 调整背包中物品顺序 |
| 点击物品 | 在休息站使用道具 |
| 点击商人 | 买卖物品 |

---

## 核心玩法

### 三大核心属性 (0-100)

| 属性 | 说明 | 消耗/变化途径 | 归零结局 |
|------|------|---------------|----------|
| **燃油** | 车辆动力来源 | 每行文本按里程比例消耗 | 燃油耗尽 |
| **耐久** | 车辆状态 | 事件损伤、使用修理物品恢复 | 车辆报废 |
| **舒适** | 乘客满意度 | 事件影响、乘客行为 | 众叛亲离 |

### 游戏循环

```
文本生成 → 里程增加 → 燃油消耗 → 检查事件 → 玩家选择 → 应用效果 → 继续行驶
```

- 每行文本增加 **1~4 km** 里程
- 每 **5 km** 消耗 **1.2%** 燃油
- 每 **2 行** 检查是否触发事件
- 每 **25 km** 强制触发昼夜休息事件

---

## 数值系统

### 资源管理

| 资源 | 初始值 | 说明 |
|------|--------|------|
| 金币 | 6 | 用于商人交易、休息站消费 |
| 背包载重 | 50 | 物品总重量上限 |
| 里程 | 0 | 当前旅程行驶距离，历史最高会保存 |

### 好感度系统

- 每位乘客有独立好感度 (0-100)，默认 50
- 好感度影响特殊物品获取和部分事件触发
- 车上成员列表显示「♥ 数值」，颜色随好感变化

---

## 乘客系统

### 乘客一览

| 乘客 | 颜色 | 特殊机制 |
|------|------|----------|
| 鹿 | 棕色 | 好感 90+ 获得鹿角护符 |
| 猎人 | 深棕 | 需鹿先上车，好感 90+ 且耐久≤40 获得猎人徽章 |
| 骚福瑞 | 粉色 | 车内多人好感 70+ 获得骚福瑞手办 |
| 旅行者 | 绿色 | 第三次到达目的地永久上车 |
| 年迈妇人 | 粉红 | 到达后获得 30 金币感谢费 |
| 猫 | 橙色 | 需喂食 3 次才上车，好感 85+ 获得幸运符 |
| 流浪艺人 | 黄色 | 上车后不再触发流浪艺人事件 |

### 乘客特殊机制

- **目的地系统**: 旅行者、年迈妇人有目的地，到达后自动下车
- **好感度台词**: 每次选择后，车上成员会随机说出专属台词
- **特殊结局**: 鹿和猎人同时上车且好感均 70+ 可获得「和平徽章」

---

## 物品系统

### 消耗品

| 物品 | 重量 | 效果 |
|------|------|------|
| 油桶 | 8 | 燃油 +30 |
| 修理包 | 5 | 耐久 +25 |
| 坐垫 | 3 | 舒适 +20 |
| 急救箱 | 4 | 耐久 +10, 舒适 +15 |
| 零食 | 1 | 舒适 +10 |
| 高级燃油 | 10 | 燃油 +50 |

### 材料

废金属、布料、草药、空罐、原油、精炼剂、电池、橡胶、皮革、铜线

### 合成系统

在工坊可合成物品，例如：

| 配方 | 材料 | 产物 |
|------|------|------|
| 修理包 | 废金属×2 | 修理包×1 |
| 坐垫 | 布料×3 | 坐垫×1 |
| 急救箱 | 草药×2, 布料×1 | 急救箱×1 |
| 油桶 | 空罐×1, 原油×1 | 油桶×1 |

---

## 事件系统

### 触发规则

| 规则 | 配置值 |
|------|--------|
| 文本间隔 | 每 **2 行** 检查一次是否触发事件 |
| 文本速度 | 1500 ms |
| 昼夜休息 | 每 **25 km** 强制触发 |
| 去重窗口 | 最近 **4 次** 事件不重复同一事件 |
| 休息类限制 | 每 25 km 周期内最多 **3 次** 休息类事件 |

### 事件类型

- **遭遇类**: 鹿、雨天、骚福瑞、路障、大雾、迷路孩子、流浪汉等
- **停留/探索类**: 休息站、工坊、加油站、废弃仓库/矿井/农场等
- **商人类**: 流浪商人、神秘商人、技术商人、物资贩子
- **特殊类**: 神秘宝箱、迷路旅行者、流浪猫、无线电塔、沙尘暴等

### 事件效果类型

| 效果 | 说明 |
|------|------|
| addItems/removeItems | 获得/失去物品 |
| gold | 获得/消耗金币 |
| fuel/durability/comfort | 属性变动 |
| addPassenger/removePassenger | 乘客上下车 |
| favor | 指定乘客好感变动 |
| favorAll | 所有车上乘客好感变动 |
| unlockEvents | 解锁新事件 |
| openMerchantModal | 打开商人界面 |

---

## 结局与成就

### 失败结局

| 结局 | 触发条件 |
|------|----------|
| 燃油耗尽 | 燃油 ≤ 0 |
| 车辆报废 | 耐久 ≤ 0 |
| 众叛亲离 | 舒适 ≤ 0 |

### 特殊结局

| 结局 | 条件 |
|------|------|
| 完美旅程 | 里程≥300km，三围均≥50%，至少 1 名乘客 |
| 传奇司机 | 里程≥500km，三围均≥30% |
| 永恒友谊 | 车上≥3 人，所有人好感≥80，里程≥100km |
| 收藏家 | 7 种乘客都上过车，里程≥150km |
| 和谐之旅 | 鹿和猎人同时在车，好感均≥70，里程≥80km |

### 成就系统

共 **31 个成就**，包括：

- **里程类**: 初出茅庐 (50km)、公路行者 (100km)、长途司机 (200km)、公路之王 (500km)
- **乘客类**: 森林之友、猎人同行、旅行伙伴等 8 个
- **好感度类**: 人见人爱、完美司机
- **物品类**: 手工达人、实用主义
- **事件类**: 见多识广、商人朋友
- **特殊类**: 生存专家、完美旅程
- **结局类**: 11 个隐藏成就

---

## 开发指南

### 项目结构

```
RedPica/
├── index.html              # 主菜单页面
├── game.html               # 主游戏页面
├── favicon.png             # 游戏图标
├── README.md               # 开发者指南
├── 游戏完整文档.md          # 详细游戏机制文档
├── 项目说明.md             # 项目功能概要
└── js/                     # JavaScript 代码目录
    ├── game_config/        # 游戏配置和数据
    ├── game_system/        # 核心系统模块
    ├── game_show/          # 显示和动画模块
    └── gameplay/           # 游戏玩法逻辑
```

### 核心模块

| 模块 | 文件 | 职责 |
|------|------|------|
| 事件处理 | `event-handler.js` | 事件触发、选择处理、效果应用 |
| 游戏状态 | `game-state.js` | gameState、truckState、inventoryState 管理 |
| 存档系统 | `save-system.js` | Cookie + localStorage 存档/读档 |
| 皮卡显示 | `truck-display.js` | 皮卡 ASCII 渲染、乘客位置 |
| 道路动画 | `road.js` | 道路字符滚动动画 |

### 如何扩展

#### 新增事件

1. 在 `js/game_config/events/` 对应文件中按现有格式添加事件对象
2. 确保在 `events-index.js` 的合并源中
3. 需要解锁时，在其它事件的 `unlockEvents` 中加入新事件 ID

#### 新增乘客

1. 在 `passenger-config.js` 的 `PASSENGER_CONFIG` 中增加配置
2. 在 `passenger-dialogue-config.js` 中增加 `afterChoice` 台词
3. 事件中使用 `addPassenger: "乘客名"`

#### 新增物品

1. 在 `items-config.js` 的 `ITEMS_CONFIG` 中添加
2. 需要合成时，在 `CRAFTING_RECIPES` 中添加配方

### 配置位置

| 配置项 | 文件 |
|--------|------|
| 全局数值 | `game-config.js` |
| 乘客配置 | `passenger-config.js` |
| 物品配置 | `items-config.js` |
| 商人价格 | `merchant-config.js` |
| 事件配置 | `events/` 目录 |
| 结局配置 | `endings-config.js` |
| 成就配置 | `achievements-config.js` |

---

## 链接

- [GitHub 仓库](https://github.com/DefinerSy/RedPica)
- [技术文档](技术文档.md)
- [游戏完整文档](游戏完整文档.md)
- [项目说明](项目说明.md)

---

**文档版本**: 4.0  
**更新日期**: 2026 年 2 月 21 日

